# 高阶组件 hoc

以参数为组件，返回值为新组件的函数

将可复用部分抽离出来，在当前组件的上层注入，以达到复用的目的

## 优点：

· 代码复用，公共状态/逻辑抽象 显著地减少代码量
· 可以对 state/event/props 进行劫持、操作

## 缺点：

· 增加了组件嵌套层级，数量过多时对渲染的性能有影响
· 容易忽略 ref、displayName 等被篡改的问题，对于一些原生 dom 元素的功能，如 input 框的聚焦，在封装此类组件库时，ref 的转发是必要的
· 对于已使用了 HOC 的业务，需求的扩展有一定的难度
· 需包裹多个高阶组件并且其间有相似逻辑时，容易导致功能覆盖，需考虑嵌套顺序，增加研发成本

## 透传 props

hoc 旨在为组件添加特性，不应该破坏性地修改组件本身功能，故应该将与自身无关的 props 进行穿透以保证原始组件可以正常运行

## 什么时候用高阶组件、什么时候用组件？

当页面一致时，使用组件来进行复用；当逻辑一致时，使用高阶组件来注册共通逻辑

### 注意迁移静态方法

当你为组件添加一个 hoc 时，其实是在当前组件外多包了一层，即 container 组件，该组件上不会拥有你原来组件上的静态方法，需要手动迁移
