# 响应式

## 创建响应式对象

在 initState()（src/core/instance/state.js）初始化 props 和 data （initProps()、initData()）将其中的每一个属性变为响应式的（defineReactive()）

1. 为每一个属性创建一个观察者实例（defineReactive()中的 observe()）
   1.1 为当前处理的属性添加\_\_ob\_\_属性，代表其是响应式的

### Q：对于被监听的数据，其\_\_ob\_\_属性是在什么时候被加上的？，这个属性有什么作用？

在将属性添加响应式行为时挂载的，defineReactive() ——> observe() ——> new Observer() ——> def(value, '\_\_ob\_\_', this)（src/core/observer/index.js），其作为一个标识，代表当前属性是响应式的

## 依赖收集

### Dep()

简易版的 defineProperty()，用于一些比较轻的函数上

#### Q：Dep 如何维护全局唯一的监听器(Watcher 实例)？全局同时只存在一个监听器？

通过将 Watcher 实例变为 static 属性来实现唯一性（static 属性挂载在 class 上）

## 派发更新
